/* prompt chat gpt
in plpgsql create a table 'journal' with column 'id' primary key uuid generated by database, userId type uuid, titre text, description text , parentId nullable uuid,isRoot boolean default true, imagetittle text, urlImage text
*/
CREATE OR REPLACE FUNCTION create_journal_table()
RETURNS VOID AS $$
BEGIN
    -- Check if the table already exists, drop it if needed
    IF EXISTS (SELECT 1 FROM information_schema.tables WHERE table_name = 'journal' AND table_schema = 'public') THEN
        DROP TABLE public.journal;
    END IF;

    -- Create the 'journal' table
    CREATE TABLE public.journal (
        id UUID DEFAULT gen_random_uuid() PRIMARY KEY, -- Generates UUID by the database
        userId UUID,
        titre TEXT,
        description TEXT,
        parentId UUID NULL ,-- Define parentId as a nullable UUID
        isRoot BOOLEAN DEFAULT TRUE,
        urlImage TEXT
    );

    -- Display a success message
    RAISE NOTICE 'Table "journal" created successfully.';
END;
$$ LANGUAGE plpgsql;

-- Call the function to create the table
SELECT create_journal_table();


